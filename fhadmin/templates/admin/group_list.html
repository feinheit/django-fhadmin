{% load fhadmin_module_groups i18n %}
{% fhadmin_group_list request %}

{% if group_list %}
{% for group, app_list in group_list %}
<div class="group">
    <h2>{{ group }}</h2>
    {% for app in app_list %}
        <div class="module">
        <table summary="{% blocktrans with app.name as name %}Models available in the {{ name }} application.{% endblocktrans %}">
        <caption class="caption {{ app.name|lower }}"><a href="{{ app.app_url }}" class="section">{% blocktrans with app.name as name %}{{ name }}{% endblocktrans %}</a></caption>
        {% for model in app.models %}
            <tr>
            {% if model.perms.change %}
                <th scope="row"><a href="{{ model.admin_url }}">{{ model.name }}</a></th>
            {% else %}
                <th scope="row">{{ model.name }}</th>
            {% endif %}

            {% if model.perms.add %}
                <td><a href="{{ model.admin_url }}add/" class="addlink">&nbsp;</a></td>
            {% else %}
                <td>&nbsp;</td>
            {% endif %}
            </tr>
        {% endfor %}
        </table>
        </div>
    {% endfor %}
</div>
{% endfor %}
<script type="text/javascript">
if (window.django && window.django.jQuery) {
    (function($){
        $(function(){
            var quickpanel = $('#quickpanel');
            quickpanel.hide();

            $('#header').hover(function() {
                quickpanel.stop(true, true).delay(250).slideDown('fast');
            }, function() {
                quickpanel.stop(true, true).delay(500).slideUp('fast');
            });
        });
    })(django.jQuery);
} else {
    // hide quickpanel unconditionally if jQuery isn't available, e.g.
    // on the admin dashboard
    document.getElementById('quickpanel').style.display = 'none';
}
</script>
{% else %}
    <p>{% trans "You don't have permission to edit anything." %}</p>
{% endif %}
